<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  {% seo %}

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Prism.js for Syntax Highlighting -->
  <link id="prism-theme" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  
  <!-- Tailwind Configuration -->
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            'sans': ['Inter', 'ui-sans-serif', 'system-ui', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica Neue', 'Arial', 'Noto Sans', 'sans-serif'],
            'mono': ['JetBrains Mono', 'ui-monospace', 'SFMono-Regular', 'Menlo', 'Monaco', 'Consolas', 'Liberation Mono', 'Courier New', 'monospace']
          },
          colors: {
            'custom-blue': {
              50: '#e7f5ff',
              100: '#d0ebff',
              200: '#a5d8ff',
              300: '#74c0fc',
              400: '#339af0',
              500: '#1c7ed6',
              600: '#1971c2',
              700: '#1864ab',
              800: '#185a9d',
              900: '#15559a',
            }
          }
        }
      }
    }
  </script>
  
  <!-- Custom styles for syntax highlighting and additional components -->
  <style>
    /* Smooth scrolling */
    html { scroll-behavior: smooth; }
    
    /* GitHub-style syntax highlighting for code blocks */
    .highlight { 
      position: relative;
      background-color: #f6f8fa;
      border: 1px solid #d1d9e0;
      border-radius: 6px;
      overflow: hidden;
      margin: 1rem 0;
    }
    .dark .highlight {
      background-color: #0d1117;
      border-color: #30363d;
    }
    .highlight pre { 
      padding: 16px;
      overflow-x: auto;
      font-size: 14px;
      line-height: 1.45;
      margin: 0;
      background: transparent;
    }
    .highlight code { 
      font-family: 'JetBrains Mono', 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
      background: transparent;
      padding: 0;
      border-radius: 0;
      font-size: inherit;
    }
    
    /* GitHub Light Theme Colors */
    .highlight .token.comment,
    .highlight .token.prolog,
    .highlight .token.doctype,
    .highlight .token.cdata {
      color: #6a737d;
      font-style: italic;
    }
    .highlight .token.punctuation {
      color: #24292e;
    }
    .highlight .token.property,
    .highlight .token.tag,
    .highlight .token.boolean,
    .highlight .token.number,
    .highlight .token.constant,
    .highlight .token.symbol,
    .highlight .token.deleted {
      color: #005cc5;
    }
    .highlight .token.selector,
    .highlight .token.attr-name,
    .highlight .token.string,
    .highlight .token.char,
    .highlight .token.builtin,
    .highlight .token.inserted {
      color: #032f62;
    }
    .highlight .token.operator,
    .highlight .token.entity,
    .highlight .token.url,
    .language-css .token.string,
    .style .token.string {
      color: #d73a49;
    }
    .highlight .token.atrule,
    .highlight .token.attr-value,
    .highlight .token.keyword {
      color: #d73a49;
    }
    .highlight .token.function,
    .highlight .token.class-name {
      color: #6f42c1;
    }
    .highlight .token.regex,
    .highlight .token.important,
    .highlight .token.variable {
      color: #e36209;
    }
    
    /* GitHub Dark Theme Colors */
    .dark .highlight .token.comment,
    .dark .highlight .token.prolog,
    .dark .highlight .token.doctype,
    .dark .highlight .token.cdata {
      color: #8b949e;
      font-style: italic;
    }
    .dark .highlight .token.punctuation {
      color: #c9d1d9;
    }
    .dark .highlight .token.property,
    .dark .highlight .token.tag,
    .dark .highlight .token.boolean,
    .dark .highlight .token.number,
    .dark .highlight .token.constant,
    .dark .highlight .token.symbol,
    .dark .highlight .token.deleted {
      color: #79c0ff;
    }
    .dark .highlight .token.selector,
    .dark .highlight .token.attr-name,
    .dark .highlight .token.string,
    .dark .highlight .token.char,
    .dark .highlight .token.builtin,
    .dark .highlight .token.inserted {
      color: #a5d6ff;
    }
    .dark .highlight .token.operator,
    .dark .highlight .token.entity,
    .dark .highlight .token.url,
    .dark .language-css .token.string,
    .dark .style .token.string {
      color: #ff7b72;
    }
    .dark .highlight .token.atrule,
    .dark .highlight .token.attr-value,
    .dark .highlight .token.keyword {
      color: #ff7b72;
    }
    .dark .highlight .token.function,
    .dark .highlight .token.class-name {
      color: #d2a8ff;
    }
    .dark .highlight .token.regex,
    .dark .highlight .token.important,
    .dark .highlight .token.variable {
      color: #ffa657;
    }
    
    /* Base text color for code */
    .highlight code,
    .highlight pre {
      color: #24292e;
    }
    .dark .highlight code,
    .dark .highlight pre {
      color: #c9d1d9;
    }
    
    /* GitHub-style copy button for code blocks */
    .copy-btn {
      position: absolute;
      top: 8px;
      right: 8px;
      padding: 4px 8px;
      font-size: 12px;
      font-weight: 500;
      line-height: 20px;
      background-color: #f6f8fa;
      color: #24292e;
      border: 1px solid rgba(27,31,36,0.15);
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s ease;
      font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif;
    }
    .copy-btn:hover {
      background-color: #f3f4f6;
      border-color: rgba(27,31,36,0.15);
      transform: translateY(-1px);
      box-shadow: 0 1px 3px rgba(27,31,36,0.12);
    }
    .dark .copy-btn {
      background-color: #21262d;
      color: #c9d1d9;
      border-color: rgba(240,246,252,0.1);
    }
    .dark .copy-btn:hover {
      background-color: #30363d;
      border-color: rgba(240,246,252,0.15);
    }
    .copy-btn.copied { 
      background-color: #dcfce7;
      color: #166534;
      border-color: #22c55e;
    }
    .dark .copy-btn.copied {
      background-color: #14532d;
      color: #86efac;
      border-color: #22c55e;
    }
    
    /* Language label styling */
    .highlight::before {
      content: attr(data-language);
      position: absolute;
      top: 8px;
      left: 16px;
      font-size: 12px;
      font-weight: 600;
      color: #656d76;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      pointer-events: none;
    }
    .dark .highlight::before {
      color: #7d8590;
    }
    .highlight[data-language=""]::before {
      display: none;
    }
    
    /* Alert components */
    .alert-info { 
      padding: 1rem;
      background-color: rgb(239 246 255);
      border: 1px solid rgb(191 219 254);
      border-radius: 0.5rem;
      color: rgb(30 64 175);
    }
    .dark .alert-info {
      background-color: rgb(30 58 138 / 0.2);
      border-color: rgb(30 64 175);
      color: rgb(191 219 254);
    }
    .alert-warning { 
      padding: 1rem;
      background-color: rgb(254 249 195);
      border: 1px solid rgb(254 240 138);
      border-radius: 0.5rem;
      color: rgb(146 64 14);
    }
    .dark .alert-warning {
      background-color: rgb(146 64 14 / 0.2);
      border-color: rgb(146 64 14);
      color: rgb(254 240 138);
    }
    
    /* Custom prose styles for content */
    .content-area h1 {
      font-size: 2.25rem;
      font-weight: 700;
      margin-top: 2rem;
      margin-bottom: 1rem;
      line-height: 1.2;
    }
    .content-area h2 {
      font-size: 1.875rem;
      font-weight: 600;
      margin-top: 2rem;
      margin-bottom: 1rem;
      line-height: 1.3;
    }
    .content-area h3 {
      font-size: 1.5rem;
      font-weight: 600;
      margin-top: 1.5rem;
      margin-bottom: 0.75rem;
      line-height: 1.3;
    }
    .content-area p {
      margin-bottom: 1rem;
      line-height: 1.7;
    }
    .content-area ul, .content-area ol {
      margin-bottom: 1rem;
      padding-left: 1.5rem;
    }
    .content-area li {
      margin-bottom: 0.5rem;
      line-height: 1.6;
    }
    .content-area a {
      color: rgb(29 78 216);
      text-decoration: underline;
      text-underline-offset: 2px;
    }
    .dark .content-area a {
      color: rgb(147 197 253);
    }
    .content-area a:hover {
      color: rgb(59 130 246);
    }
    .dark .content-area a:hover {
      color: rgb(96 165 250);
    }
    .content-area strong {
      font-weight: 600;
    }
    .content-area code:not(.highlight code) {
      background-color: rgb(249 250 251);
      color: rgb(239 68 68);
      padding: 0.125rem 0.25rem;
      border-radius: 0.25rem;
      font-size: 0.875rem;
    }
    .dark .content-area code:not(.highlight code) {
      background-color: rgb(55 65 81);
      color: rgb(248 113 113);
    }
  </style>

  <script src="{{ '/assets/js/main.js' | relative_url }}" defer></script>

  <!-- Favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href="https://www.keycloak.org/resources/images/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://www.keycloak.org/resources/images/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://www.keycloak.org/resources/images/favicon/favicon-16x16.png">

</head>

<body class="font-sans bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-200 pt-16">

  <!-- Header -->
  <header class="fixed top-0 left-0 right-0 h-16 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 shadow-sm z-40">
    <div class="flex items-center justify-between h-full px-6">
      <a href="{{ '/' | relative_url }}" class="text-xl font-semibold text-gray-900 dark:text-white hover:text-custom-blue-600 dark:hover:text-custom-blue-300 transition-colors duration-200">
        {{ site.title | escape }}
      </a>
      <div class="flex items-center space-x-3">
        <button id="theme-toggle" class="p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors duration-200" title="Toggle theme">
          <!-- Sun icon (visible in dark mode) -->
          <svg class="w-5 h-5 hidden dark:block" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
          </svg>
          <!-- Moon icon (visible in light mode) -->
          <svg class="w-5 h-5 block dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
          </svg>
        </button>
        <button id="sidebar-toggle" class="p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg md:hidden transition-colors duration-200" title="Toggle sidebar">
          <!-- Hamburger menu icon -->
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>
    </div>
  </header>

  <div class="flex min-h-screen pt-0">
    <!-- Sidebar -->
    <aside id="sidebar" class="fixed md:sticky top-16 left-0 h-[calc(100vh-4rem)] w-72 bg-gray-50 dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 overflow-y-auto z-30 transform -translate-x-full md:translate-x-0 transition-transform duration-300 ease-in-out">
      <nav class="p-6">
        <ul class="space-y-1">
          <li><a href="#architecture-overview" class="sidebar-link block px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:text-custom-blue-600 dark:hover:text-custom-blue-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200">Architecture Overview</a></li>
          <li><a href="#global-host-configuration-all-nodes" class="sidebar-link block px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:text-custom-blue-600 dark:hover:text-custom-blue-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200">Global Host Configuration</a></li>
          <li><a href="#requirements--sizing" class="sidebar-link block px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:text-custom-blue-600 dark:hover:text-custom-blue-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200">Requirements & Sizing</a></li>
          <li><a href="#prepare-disks-xfs-and-mounts-data14" class="sidebar-link block px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:text-custom-blue-600 dark:hover:text-custom-blue-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200">Prepare Disks (XFS)</a></li>
          <li><a href="#install-docker--initialize-swarm" class="sidebar-link block px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:text-custom-blue-600 dark:hover:text-custom-blue-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200">Install Docker & Swarm</a></li>
          <li><a href="#node-labels--overlay-network" class="sidebar-link block px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:text-custom-blue-600 dark:hover:text-custom-blue-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200">Node Labels & Network</a></li>
          <li><a href="#secrets-root-credentials" class="sidebar-link block px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:text-custom-blue-600 dark:hover:text-custom-blue-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200">Secrets (Root Credentials)</a></li>
          <li><a href="#deploy-the-cluster-docker-stackyml" class="sidebar-link block px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:text-custom-blue-600 dark:hover:text-custom-blue-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200">Deploy the Cluster</a></li>
          <li><a href="#load-balancer-nginx" class="sidebar-link block px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:text-custom-blue-600 dark:hover:text-custom-blue-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200">Load Balancer (NGINX)</a></li>
          <li><a href="#first-login-users--policies-mc" class="sidebar-link block px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:text-custom-blue-600 dark:hover:text-custom-blue-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200">First Login & Users</a></li>
          <li><a href="#health-readiness--observability" class="sidebar-link block px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:text-custom-blue-600 dark:hover:text-custom-blue-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200">Health & Observability</a></li>
          <li><a href="#upgrades-zero-downtime--rolling-updates" class="sidebar-link block px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:text-custom-blue-600 dark:hover:text-custom-blue-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200">Upgrades & Rolling Updates</a></li>
          <li><a href="#capacity-expansion-add-a-new-server-pool" class="sidebar-link block px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:text-custom-blue-600 dark:hover:text-custom-blue-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200">Capacity Expansion</a></li>
          <li><a href="#security-hardening-checklist" class="sidebar-link block px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:text-custom-blue-600 dark:hover:text-custom-blue-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200">Security Hardening</a></li>
          <li><a href="#troubleshooting" class="sidebar-link block px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:text-custom-blue-600 dark:hover:text-custom-blue-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200">Troubleshooting</a></li>
          <li><a href="#appendix-handy-commands" class="sidebar-link block px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:text-custom-blue-600 dark:hover:text-custom-blue-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200">Appendix: Handy Commands</a></li>
        </ul>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 md:ml-0 min-w-0">
      <div class="max-w-4xl mx-auto px-6 py-8">
        <div class="content-area text-gray-900 dark:text-gray-100">
          {{ content }}
        </div>

        <footer class="mt-16 pt-8 border-t border-gray-200 dark:border-gray-700">
          <p class="text-sm text-gray-600 dark:text-gray-400">
            &copy; {{ 'now' | date: "%Y" }} {{ site.author.name | default: "Your Name" }}. Licensed under Apache 2.0.
          </p>
        </footer>
      </div>
    </main>
  </div>

  <!-- Sidebar overlay for mobile -->
  <div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-20 md:hidden hidden"></div>

</body>

</html>
